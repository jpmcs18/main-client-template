(this["webpackJsonpmain-client"]=this["webpackJsonpmain-client"]||[]).push([[0],{107:function(e,t,n){},108:function(e,t,n){"use strict";n.r(t);var r=n(1),c=n.n(r),a=n(26),s=n.n(a),i=(n(52),n(4)),o=n(9),u=n(11),l=n(0);function d(e){var t=e.title,n=e.className,c=e.onClose,a=e.children;return Object(r.useEffect)((function(){return document.body.classList.add("body-modal"),function(){document.body.classList.remove("body-modal")}})),s.a.createPortal(Object(l.jsx)(l.Fragment,{children:Object(l.jsxs)("div",{className:"modal-container",children:[Object(l.jsx)("div",{className:"modal-blocker"}),Object(l.jsxs)("div",{className:"modal-content "+n,children:[Object(l.jsxs)("div",{className:"modal-content-header",children:[Object(l.jsx)("div",{className:"header-text",children:t}),void 0!==c&&Object(l.jsx)(u.a,{className:"close-icon",icon:o.j,onClick:c})]}),a]})]})}),document.getElementById("modal"))}function j(){var e=Object(r.useContext)(S),t=Object(r.useContext)(E),n=D();function c(){e()}function a(){var r;"Unauthorized"===(null===t||void 0===t?void 0:t.message)&&n(!1),e(),null===t||void 0===t||null===(r=t.onOk)||void 0===r||r.call(t)}return Object(l.jsxs)(d,{children:[Object(l.jsx)("div",{className:"modal-content-body",children:Object(l.jsx)("p",{children:null===t||void 0===t?void 0:t.message})}),Object(l.jsxs)("div",{className:"modal-footer",children:[(void 0===(null===t||void 0===t?void 0:t.action)||"OKCANCEL"===(null===t||void 0===t?void 0:t.action))&&Object(l.jsx)("button",{onClick:a,className:"btn-modal btn-primary",children:"OK"}),"OKCANCEL"===(null===t||void 0===t?void 0:t.action)&&Object(l.jsx)("button",{onClick:c,className:"btn-modal btn-secondary ",children:"CANCEL"}),"YESNO"===(null===t||void 0===t?void 0:t.action)&&Object(l.jsx)("button",{onClick:a,className:"btn-modal btn-primary",children:"YES"}),"YESNO"===(null===t||void 0===t?void 0:t.action)&&Object(l.jsx)("button",{onClick:c,className:"btn-modal btn-secondary",children:"NO"})]})]})}var b="http:"===window.location.protocol?"http://jpmcs24-001-site1.itempurl.com":"https://192.168.210.12:804",f="nothingunusualkey",p=n(56),h="--pxx--",v="--pxx-xdx--";function O(e){return p.AES.encrypt(e,f).toString()}function m(e){return p.AES.decrypt(e,f).toString(p.enc.Utf8)}function x(e){void 0!==e.token&&void 0!==e.refreshToken&&sessionStorage.setItem(h,O(JSON.stringify(e)))}function w(){sessionStorage.removeItem(h)}function y(){try{var e;return JSON.parse(m(null!==(e=sessionStorage.getItem(h))&&void 0!==e?e:""))}catch(t){return}}function k(e){if(void 0!==e){var t={username:e.username,admin:e.admin,personnel:e.personnel,distinctModules:e.distinctModules};sessionStorage.setItem(v,O(JSON.stringify(t)))}}var N=c.a.createContext(!1),g=c.a.createContext(void 0),C=c.a.createContext((function(){})),S=c.a.createContext((function(){})),E=c.a.createContext(void 0),P=c.a.createContext(!1),I=c.a.createContext((function(){})),U=c.a.createContext((function(){})),A=c.a.createContext((function(){}));function R(){return Object(r.useContext)(g)}function D(){return Object(r.useContext)(I)}function F(){return Object(r.useContext)(C)}function L(){return Object(r.useContext)(U)}function M(){return Object(r.useContext)(A)}function z(e){var t=e.children,n=Object(r.useState)((function(){var e=y();return void 0!==(null===e||void 0===e?void 0:e.token)})),c=Object(i.a)(n,2),a=c[0],s=c[1],o=Object(r.useState)((function(){return function(){try{var e;return JSON.parse(m(null!==(e=sessionStorage.getItem(v))&&void 0!==e?e:""))}catch(t){return}}()})),u=Object(i.a)(o,2),d=u[0],b=u[1],f=Object(r.useState)(!1),p=Object(i.a)(f,2),h=p[0],O=p[1],x=Object(r.useState)(),w=Object(i.a)(x,2),k=w[0],R=w[1],D=Object(r.useState)((function(){return 0})),F=Object(i.a)(D,2),L=F[0],M=F[1];return Object(l.jsxs)(l.Fragment,{children:[Object(l.jsxs)("div",{className:"loading-screen"+(L>0?" loading-block":""),children:[Object(l.jsx)("div",{className:"loading-blocker"}),Object(l.jsxs)("div",{className:"loading",children:[Object(l.jsx)("div",{className:"balls"}),Object(l.jsx)("div",{className:"balls"})]})]}),Object(l.jsx)(U.Provider,{value:function(e){M((function(t){return t+(e?1:-1)})),L+(e?1:-1)===1?document.body.classList.add("body-modal"):document.body.classList.remove("body-modal")},children:Object(l.jsx)(P.Provider,{value:h,children:Object(l.jsx)(S.Provider,{value:function(){O(!1)},children:Object(l.jsx)(E.Provider,{value:k,children:Object(l.jsx)(C.Provider,{value:function(e){R(e),O(!0)},children:Object(l.jsx)(N.Provider,{value:a,children:Object(l.jsx)(I.Provider,{value:function(e){e||(sessionStorage.clear(),b(void 0)),s(e)},children:Object(l.jsx)(g.Provider,{value:d,children:Object(l.jsxs)(A.Provider,{value:function(e){b(e)},children:[t,h&&Object(l.jsx)(j,{})]})})})})})})})})})]})}var K=n(18),Y=n(28),B=n(8),T=n(15),V=n(7),J=n(3),q=n(2),G=n.n(q),H="securities/refresh",Q="securities/log",W="users/profile",X="users/search",Z="users/activate",$="users/reset-password",_="users",ee="users",te="users",ne="users/profile",re="modules",ce="roles/search",ae="roles",se="roles",ie="roles",oe="personnels",ue="personnels/search",le="personnels",de="personnels",je=n(23),be=n.n(je);function fe(e){return pe.apply(this,arguments)}function pe(){return pe=Object(J.a)(G.a.mark((function e(t){var n;return G.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==(null===(n=y())||void 0===n?void 0:n.token)){e.next=3;break}throw new Error("Unauthorized");case 3:return e.next=5,be.a.get(t,{headers:{Authorization:"Bearer "+(null===n||void 0===n?void 0:n.token),"content-type":"application/json"},baseURL:b}).then(function(){var e=Object(J.a)(G.a.mark((function e(t){return G.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=t.status,e.next=200===e.t0?3:4;break;case 3:return e.abrupt("return",t.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch(function(){var e=Object(J.a)(G.a.mark((function e(n){return G.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!n.response){e.next=15;break}e.t0=n.response.status,e.next=400===e.t0?4:403===e.t0?5:401===e.t0?6:404===e.t0?13:14;break;case 4:case 14:throw new Error(n.response.data);case 5:throw new Error("Access denied");case 6:return e.next=8,Ne();case 8:if(!e.sent){e.next=12;break}return e.next=11,fe(t);case 11:return e.abrupt("return",e.sent);case 12:throw new Error("Unauthorized");case 13:throw new Error("Not Data Found");case 15:throw new Error(n);case 16:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e)}))),pe.apply(this,arguments)}function he(e,t){return ve.apply(this,arguments)}function ve(){return ve=Object(J.a)(G.a.mark((function e(t,n){var r;return G.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0!==(null===(r=y())||void 0===r?void 0:r.token)){e.next=3;break}throw new Error("Unauthorized");case 3:return e.next=5,be.a.post(t,n,{headers:{Authorization:"Bearer "+(null===r||void 0===r?void 0:r.token),"content-type":"application/json"},baseURL:b}).then(function(){var e=Object(J.a)(G.a.mark((function e(t){return G.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=t.status,e.next=200===e.t0?3:201===e.t0?4:204===e.t0?5:6;break;case 3:case 4:return e.abrupt("return",t.data);case 5:return e.abrupt("return",!0);case 6:throw new Error("Unknown Error");case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch(function(){var e=Object(J.a)(G.a.mark((function e(r){return G.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!r.response){e.next=15;break}e.t0=r.response.status,e.next=400===e.t0?4:403===e.t0?5:401===e.t0?6:404===e.t0?13:14;break;case 4:case 14:throw new Error(r.response.data);case 5:throw new Error("Access denied");case 6:return e.next=8,Ne();case 8:if(!e.sent){e.next=12;break}return e.next=11,he(t,n);case 11:return e.abrupt("return",e.sent);case 12:throw new Error("Unauthorized");case 13:throw new Error("No Data Found");case 15:throw new Error(r);case 16:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e)}))),ve.apply(this,arguments)}function Oe(e,t){return me.apply(this,arguments)}function me(){return me=Object(J.a)(G.a.mark((function e(t,n){var r;return G.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0!==(null===(r=y())||void 0===r?void 0:r.token)){e.next=3;break}throw new Error("Unauthorized");case 3:return e.next=5,be.a.put(t,n,{headers:{Authorization:"Bearer "+(null===r||void 0===r?void 0:r.token),"content-type":"application/json"},baseURL:b}).then(function(){var e=Object(J.a)(G.a.mark((function e(t){return G.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=t.status,e.next=204===e.t0?3:4;break;case 3:return e.abrupt("return",!0);case 4:throw new Error("Unknown Error");case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch(function(){var e=Object(J.a)(G.a.mark((function e(r){return G.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!r.response){e.next=15;break}e.t0=r.response.status,e.next=400===e.t0?4:403===e.t0?5:401===e.t0?6:404===e.t0?13:14;break;case 4:case 14:throw new Error(r.response.data);case 5:throw new Error("Access denied");case 6:return e.next=8,Ne();case 8:if(!e.sent){e.next=12;break}return e.next=11,Oe(t,n);case 11:return e.abrupt("return",e.sent);case 12:throw new Error("Unauthorized");case 13:throw new Error("No Data Found");case 15:throw new Error(r);case 16:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e)}))),me.apply(this,arguments)}function xe(e){return we.apply(this,arguments)}function we(){return we=Object(J.a)(G.a.mark((function e(t){var n;return G.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0!==(null===(n=y())||void 0===n?void 0:n.token)){e.next=3;break}throw new Error("Unauthorized");case 3:return e.next=5,be.a.delete(t,{headers:{Authorization:"Bearer "+(null===n||void 0===n?void 0:n.token),"content-type":"application/json"},baseURL:b}).then(function(){var e=Object(J.a)(G.a.mark((function e(t){return G.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=t.status,e.next=204===e.t0?3:4;break;case 3:return e.abrupt("return",!0);case 4:throw new Error("Unknown Error");case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch(function(){var e=Object(J.a)(G.a.mark((function e(n){return G.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!n.response){e.next=15;break}e.t0=n.response.status,e.next=400===e.t0?4:403===e.t0?5:401===e.t0?6:404===e.t0?13:14;break;case 4:case 14:throw new Error(n.response.data);case 5:throw new Error("Access denied");case 6:return e.next=8,Ne();case 8:if(!e.sent){e.next=12;break}return e.next=11,xe(t);case 11:return e.abrupt("return",e.sent);case 12:throw new Error("Unauthorized");case 13:throw new Error("No Data Found");case 15:throw new Error(n);case 16:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e)}))),we.apply(this,arguments)}function ye(e,t){return ke.apply(this,arguments)}function ke(){return ke=Object(J.a)(G.a.mark((function e(t,n){return G.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,be.a.post(t,JSON.stringify(n),{headers:{"content-type":"application/json"},baseURL:b}).then((function(e){if(200===e.status)return e.data;throw new Error("Unknown Error")})).catch(function(){var e=Object(J.a)(G.a.mark((function e(t){return G.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.response){e.next=7;break}e.t0=t.response.status,e.next=400===e.t0?4:404===e.t0?5:6;break;case 4:case 6:throw new Error(t.response.data);case 5:throw new Error("No Data Found");case 7:throw new Error(t);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)}))),ke.apply(this,arguments)}function Ne(){return ge.apply(this,arguments)}function ge(){return(ge=Object(J.a)(G.a.mark((function e(){var t;return G.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=y(),e.next=3,ye(H,t).then((function(e){if(void 0!==e)return x(e),!0;throw new Error("Unauthorized")})).catch((function(){throw w(),new Error("Unauthorized")}));case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ce(e){return Se.apply(this,arguments)}function Se(){return(Se=Object(J.a)(G.a.mark((function e(t){return G.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ye(Q,t).then((function(e){return x(e),!0}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ee(){return Pe.apply(this,arguments)}function Pe(){return(Pe=Object(J.a)(G.a.mark((function e(){return G.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fe(W);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ie(){return(Ie=Object(J.a)(G.a.mark((function e(t,n){var r;return G.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r="?page="+n,void 0!==t&&(r+="&key="+encodeURI(t)),e.next=4,fe(X+r);case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ue(e){return Ae.apply(this,arguments)}function Ae(){return(Ae=Object(J.a)(G.a.mark((function e(t){return G.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,he(Z+"/"+t,null);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Re(e){return De.apply(this,arguments)}function De(){return(De=Object(J.a)(G.a.mark((function e(t){return G.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,he($+"/"+t,null);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Fe(e){return Le.apply(this,arguments)}function Le(){return(Le=Object(J.a)(G.a.mark((function e(t){return G.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,xe(_+"/"+t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Me(e,t){return ze.apply(this,arguments)}function ze(){return(ze=Object(J.a)(G.a.mark((function e(t,n){return G.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,he(ee,Object(V.a)(Object(V.a)({},t),{},{roleIds:n}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ke(e,t,n){return Ye.apply(this,arguments)}function Ye(){return(Ye=Object(J.a)(G.a.mark((function e(t,n,r){return G.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Oe(te+"/"+t.id,Object(V.a)(Object(V.a)({},t),{},{newRoleIds:n,accessToDelete:r}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Be(e){return Te.apply(this,arguments)}function Te(){return(Te=Object(J.a)(G.a.mark((function e(t){return G.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,he(ne,t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ve(e){var t=e.title,n=e.name,c=e.type,a=e.id,s=e.className,d=e.value,j=e.readonly,b=e.onChange,f=e.onKeyPress,p=Object(r.useState)(!0),h=Object(i.a)(p,2),v=h[0],O=h[1];return Object(l.jsxs)("div",{className:"custom-input ",children:[Object(l.jsx)("label",{htmlFor:n,children:t}),Object(l.jsx)("div",{className:"input-container",children:j?Object(l.jsx)("span",{children:d}):Object(l.jsxs)(l.Fragment,{children:[Object(l.jsx)("input",{type:"password"===c?v?"password":"text":null!==c&&void 0!==c?c:"text",name:n,id:a,value:d,className:s,onChange:function(e){return null===b||void 0===b?void 0:b({elementName:null!==n&&void 0!==n?n:"",value:e.target.value})},onKeyPress:f}),"password"===c&&Object(l.jsx)("div",{className:"eye-container",children:Object(l.jsx)(u.a,{icon:v?o.f:o.g,className:"eye-icon",onClick:function(){O((function(e){return!e}))}})})]})})]})}function Je(){var e=Object(r.useState)({username:"",password:""}),t=Object(i.a)(e,2),n=t[0],c=t[1],a=F(),s=M(),o=D(),u=L();function d(){return j.apply(this,arguments)}function j(){return j=Object(J.a)(G.a.mark((function e(){return G.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return u(!0),e.next=3,Ce(n).then(function(){var e=Object(J.a)(G.a.mark((function e(t){return G.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t){e.next=4;break}return e.next=3,b();case 3:o(t);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){a({message:e.message})})).finally((function(){return u(!1)}));case 3:case"end":return e.stop()}}),e)}))),j.apply(this,arguments)}function b(){return f.apply(this,arguments)}function f(){return(f=Object(J.a)(G.a.mark((function e(){return G.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return u(!0),e.next=3,Ee().then((function(e){void 0!==e&&(k(e),s(e))})).catch((function(e){a({message:e.message})})).finally((function(){return u(!1)}));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function p(e){var t=e.elementName,r=e.value;c(Object(V.a)(Object(V.a)({},n),{},Object(T.a)({},t,r)))}function h(e){if("Enter"===e.key){var t,r;if(""===n.username)return void(null===(t=document.getElementById("username"))||void 0===t||t.focus());if(""===n.password)return void(null===(r=document.getElementById("password"))||void 0===r||r.focus());d()}}return Object(l.jsx)("section",{children:Object(l.jsxs)("div",{className:"login-container",children:[Object(l.jsx)("div",{className:"login-header",children:Object(l.jsx)("h1",{children:"User Authentication"})}),Object(l.jsxs)("div",{className:"login-content",children:[Object(l.jsx)(Ve,{title:"Username",name:"username",id:"username",className:"username",onChange:p,onKeyPress:h}),Object(l.jsx)(Ve,{title:"Password",name:"password",id:"password",type:"password",className:"password",onChange:p,onKeyPress:h}),Object(l.jsx)("button",{onClick:d,className:"btn",children:"Login"})]})]})})}function qe(e){var t=e.pages,n=e.currentPageNumber,c=e.goInPage,a=Object(r.useState)(n),s=Object(i.a)(a,2),d=s[0],j=s[1],b=Object(r.useState)(!1),f=Object(i.a)(b,2),p=f[0],h=f[1],v=Object(r.useState)(!1),O=Object(i.a)(v,2),m=O[0],x=O[1],w=Object(r.useState)(!1),y=Object(i.a)(w,2),k=y[0],N=y[1],g=Object(r.useState)(!1),C=Object(i.a)(g,2),S=C[0],E=C[1],P=Object(r.useState)([]),I=Object(i.a)(P,2),U=I[0],A=I[1];return Object(r.useEffect)((function(){j(n);for(var e=[],r=1;r<=t;r++)e.push(r);return A(e),N(!1),E(!1),h(!1),x(!1),t>1&&(n!==t&&(N(!0),E(!0)),1!==n&&(h(!0),x(!0))),function(){e=[]}}),[t,n]),Object(l.jsxs)("div",{className:"pagination",children:[Object(l.jsx)(u.a,{icon:o.a,className:p?"":"disabled",onClick:function(){p&&(c(1),h(!1),x(!1),N(!0),E(!0))}}),Object(l.jsx)(u.a,{icon:o.c,onClick:function(){m&&(j((function(e){return 1===(e-=1)&&(h(!1),x(!1)),c(e),e})),N(!0),E(!0))},className:m?"":"disabled"}),Object(l.jsxs)("div",{className:"pages-container",children:[Object(l.jsx)("button",{className:"current-page",children:d}),Object(l.jsx)("div",{className:"pages",children:U.map((function(e){return Object(l.jsx)("div",{className:e===d?"active":"",onClick:function(){var n;j(n=e),h(!0),x(!0),N(!0),E(!0),1===n&&(h(!1),x(!1)),n===t&&(N(!1),E(!1)),c(n)},children:e},e)}))})]}),Object(l.jsx)(u.a,{icon:o.d,onClick:function(){k&&(j((function(e){return(e+=1)===t&&(N(!1),E(!1)),c(e),e})),h(!0),x(!0))},className:k?"":"disabled"}),Object(l.jsx)(u.a,{icon:o.b,onClick:function(){S&&(j(t),N(!1),E(!1),h(!0),x(!0),c(t))},className:S?"":"disabled"})]})}function Ge(e){var t=e.search,n=Object(r.useState)(""),c=Object(i.a)(n,2),a=c[0],s=c[1];return Object(l.jsxs)("div",{className:"search-container",children:[Object(l.jsx)("input",{type:"text",className:"name",placeholder:"Search...",value:a,onChange:function(e){s(e.target.value)},onKeyPress:function(e){"Enter"===e.key&&t(a)}}),Object(l.jsx)(u.a,{className:"search-icon",icon:o.i,onClick:function(){t(a)}})]})}function He(e){var t,n,r,c,a=e.user,s=e.action;return Object(l.jsxs)("tr",{children:[Object(l.jsx)("td",{children:null===(t=a.personnel)||void 0===t?void 0:t.fullName}),Object(l.jsx)("td",{children:a.username}),Object(l.jsxs)("td",{className:"elipsis",children:[a.admin?"Admin":"User",(null!==(n=null===(r=a.userRoles)||void 0===r?void 0:r.length)&&void 0!==n?n:0)>0&&" | ",null===(c=a.userRoles)||void 0===c?void 0:c.map((function(e){return e.role.description})).join(" | ")]}),Object(l.jsx)("td",{children:a.active?"Active":"Inactive"}),Object(l.jsxs)("td",{className:"table-actions",children:[Object(l.jsx)("button",{className:"btn",onClick:function(){return s({type:"Activate",id:a.id,active:a.active})},children:"Activate/Deactivate"}),Object(l.jsx)("button",{className:"btn",onClick:function(){return s({type:"ResetPassword",id:a.id})},children:"Reset Password"}),Object(l.jsx)("button",{className:"btn",onClick:function(){return s({type:"Edit",user:a})},children:"Edit"}),Object(l.jsx)("button",{className:"btn",onClick:function(){return s({type:"Delete",id:a.id})},children:"Delete"})]})]})}function Qe(){return We.apply(this,arguments)}function We(){return(We=Object(J.a)(G.a.mark((function e(){return G.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",fe(oe));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Xe(e,t){return Ze.apply(this,arguments)}function Ze(){return(Ze=Object(J.a)(G.a.mark((function e(t,n){var r;return G.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r="?page="+n,void 0!==t&&(r+="&key="+encodeURI(t)),e.next=4,fe(ue+r);case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function $e(e){return _e.apply(this,arguments)}function _e(){return(_e=Object(J.a)(G.a.mark((function e(t){return G.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",he(le,t));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function et(e){return tt.apply(this,arguments)}function tt(){return(tt=Object(J.a)(G.a.mark((function e(t){return G.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Oe("".concat(de,"/").concat(t.id),t));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function nt(e){return rt.apply(this,arguments)}function rt(){return(rt=Object(J.a)(G.a.mark((function e(t){return G.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",xe("".concat(de,"/").concat(t)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ct(){return at.apply(this,arguments)}function at(){return(at=Object(J.a)(G.a.mark((function e(){return G.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",fe(ae));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function st(){return(st=Object(J.a)(G.a.mark((function e(t,n){var r;return G.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r="?page="+n,void 0!==t&&(r+="&key="+encodeURI(t)),e.next=4,fe(ce+r);case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function it(e,t){return ot.apply(this,arguments)}function ot(){return(ot=Object(J.a)(G.a.mark((function e(t,n){return G.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,he(se,{description:t,moduleIds:n});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ut(e,t,n,r){return lt.apply(this,arguments)}function lt(){return(lt=Object(J.a)(G.a.mark((function e(t,n,r,c){return G.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Oe(ie+"/"+t,{description:n,newModuleIds:r,accessToDelete:c});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function dt(e){var t=e.title,n=e.name,r=e.id,c=e.className,a=e.isCheck,s=e.onChange;return Object(l.jsx)("div",{className:"custom-input "+c,children:Object(l.jsx)("button",{className:"checkbox"+(a?" checked":""),value:a?"true":"false",id:r,onClick:function(){null===s||void 0===s||s({elementName:null!==n&&void 0!==n?n:"",value:!a})},children:t})})}function jt(e){var t,n=e.title,r=e.name,c=e.id,a=e.className,s=e.value,i=e.itemsList,o=e.readonly,u=e.onChange;return Object(l.jsxs)("div",{className:"custom-input",children:[Object(l.jsx)("label",{children:n}),Object(l.jsx)("div",{className:"select-container",children:o?Object(l.jsx)("span",{children:null===(t=i.find((function(e){return e.key===s})))||void 0===t?void 0:t.value}):Object(l.jsx)("select",{id:c,className:a,onChange:function(e){null===u||void 0===u||u({elementName:null!==r&&void 0!==r?r:"",value:e.target.value})},children:null===i||void 0===i?void 0:i.map((function(e){return Object(l.jsx)("option",{value:e.key,selected:e.value===s,children:e.value},e.key)}))})})]})}function bt(){return ft.apply(this,arguments)}function ft(){return(ft=Object(J.a)(G.a.mark((function e(){return G.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fe(re);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function pt(e){var t=e.isCheck,n=e.checkChange,r=e.id,c=e.text;return Object(l.jsxs)("div",{className:"check",children:[Object(l.jsxs)("label",{className:"check-container",children:[Object(l.jsx)("input",{type:"checkbox",id:null!==r&&void 0!==r?r:"check",onChange:n,checked:t}),Object(l.jsx)("span",{className:"checkmark"})]}),c&&Object(l.jsx)("label",{className:"check-label",htmlFor:null!==r&&void 0!==r?r:"check",children:c})]})}function ht(e){var t,n=e.module,c=Object(r.useContext)(Ot);return Object(l.jsx)("tr",{children:Object(l.jsx)("td",{className:"left-content",children:n.viewOnly?Object(l.jsx)("div",{children:n.description}):Object(l.jsx)(pt,{checkChange:function(){c({action:"Check",payload:n})},id:n.id.toString(),text:n.description,isCheck:null!==(t=null===n||void 0===n?void 0:n.checked)&&void 0!==t&&t})})})}function vt(){var e=Object(r.useContext)(mt);return Object(l.jsxs)("table",{className:"item-table",children:[Object(l.jsx)("thead",{children:Object(l.jsx)("tr",{children:Object(l.jsx)("th",{children:"Module Access"})})}),Object(l.jsx)("tbody",{children:e.map((function(e){return Object(l.jsx)(ht,{module:e},e.id)}))})]})}var Ot=Object(r.createContext)((function(){})),mt=Object(r.createContext)([]);function xt(e){var t=e.selectedRole,n=e.onClose,c=e.viewOnly,a=Object(r.useState)((function(){return null!==t&&void 0!==t?t:{id:0,description:"",accesses:[]}})),s=Object(i.a)(a,2),o=s[0],u=s[1],j=Object(r.useState)([]),b=Object(i.a)(j,2),f=b[0],p=b[1],h=L(),v=F();function O(){return(O=Object(J.a)(G.a.mark((function e(){return G.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w();case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function m(){return(m=Object(J.a)(G.a.mark((function e(){return G.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(h(!0),0!==o.id){e.next=6;break}return e.next=4,it(o.description,f.filter((function(e){return e.checked})).map((function(e){return e.id}))).then((function(){v({message:"Role Added",onOk:function(){n(!0)}})})).catch((function(e){v({message:e.message})})).finally((function(){return h(!1)}));case 4:e.next=8;break;case 6:return e.next=8,ut(o.id,o.description,f.filter((function(e){return e.checked&&void 0===e.accessId})).map((function(e){return e.id})),f.filter((function(e){return!e.checked&&void 0!==e.accessId})).map((function(e){var t;return null!==(t=e.accessId)&&void 0!==t?t:0}))).then((function(){v({message:"Role Updated",onOk:function(){n(!0)}})})).catch((function(e){v({message:e.message})})).finally((function(){return h(!1)}));case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function x(){return(x=Object(J.a)(G.a.mark((function e(t){return G.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=t.action,e.next="Check"===e.t0?3:5;break;case 3:return p(f.map((function(e){return e.id===t.payload.id&&(e.checked=!e.checked),e}))),e.abrupt("break",5);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function w(){return y.apply(this,arguments)}function y(){return y=Object(J.a)(G.a.mark((function e(){return G.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return h(!0),e.next=3,bt().then((function(e){if(void 0!==e){var t=e.map((function(e){var t,n,r=null===(t=o.accesses)||void 0===t||null===(n=t.filter((function(t){return t.moduleId===e.id})))||void 0===n?void 0:n[0];return void 0!==r&&(e.checked=!0,e.accessId=r.id),e}));c&&(t=t.filter((function(e){return void 0!==e.accessId})).map((function(e){return e.viewOnly=!0,e}))),p(t)}})).catch((function(e){v({message:e.message})})).finally((function(){return h(!1)}));case 3:case"end":return e.stop()}}),e)}))),y.apply(this,arguments)}return Object(r.useEffect)((function(){!function(){O.apply(this,arguments)}()}),[]),Object(l.jsxs)(d,{onClose:function(){n(!1)},title:c?"Role":null!==t&&void 0!==t&&t.id?"Update Role":"Add New Role",children:[Object(l.jsx)("div",{className:"concern-management-modal-body modal-content-body concern-management",children:Object(l.jsx)(Ve,{title:"Description",name:"description",value:o.description,onChange:function(e){u((function(t){return Object(V.a)(Object(V.a)({},t),{},Object(T.a)({},e.elementName,e.value))}))},readonly:c})}),Object(l.jsx)("div",{children:Object(l.jsx)(mt.Provider,{value:f,children:Object(l.jsx)(Ot.Provider,{value:function(e){return x.apply(this,arguments)},children:Object(l.jsx)(vt,{})})})}),!c&&Object(l.jsx)("div",{className:"modal-footer",children:Object(l.jsx)("button",{onClick:function(){return m.apply(this,arguments)},className:"btn-modal btn-primary",children:"SAVE"})})]})}function wt(e){var t,n,c,a,s=e.usersInfo,j=e.onClose,b=Object(r.useState)([]),f=Object(i.a)(b,2),p=f[0],h=f[1],v=Object(r.useState)([]),O=Object(i.a)(v,2),m=O[0],x=O[1],w=Object(r.useState)((function(){return null!==s&&void 0!==s?s:{id:0,username:"",name:"",active:!1,admin:!1,personnel:void 0,personnelId:void 0}})),y=Object(i.a)(w,2),k=y[0],N=y[1],g=Object(r.useState)([]),C=Object(i.a)(g,2),S=C[0],E=C[1],P=Object(r.useState)([]),I=Object(i.a)(P,2),U=I[0],A=I[1],R=Object(r.useState)((function(){var e;return null!==(e=null===s||void 0===s?void 0:s.userRoles)&&void 0!==e?e:[]})),D=Object(i.a)(R,2),M=D[0],z=D[1],Y=Object(r.useState)(!1),B=Object(i.a)(Y,2),q=B[0],H=B[1],Q=Object(r.useState)(),W=Object(i.a)(Q,2),X=W[0],Z=W[1],$=L(),_=F();function ee(){return(ee=Object(J.a)(G.a.mark((function e(){return G.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ne();case 2:return e.next=4,ae();case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function te(){return(te=Object(J.a)(G.a.mark((function e(){return G.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if($(!0),0!==k.id){e.next=6;break}return e.next=4,Me(k,M.map((function(e){return e.roleId}))).then((function(){_({message:"New User Added",onOk:function(){j(!0)}})})).catch((function(e){_({message:e.message})})).finally((function(){return $(!1)}));case 4:e.next=8;break;case 6:return e.next=8,Ke(k,M.filter((function(e){return 0===e.id})).map((function(e){return e.roleId})),M.filter((function(e){return e.deleted})).map((function(e){return e.id}))).then((function(){_({message:"User Updated",onOk:function(){j(!0)}})})).catch((function(e){_({message:e.message})})).finally((function(){return $(!1)}));case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ne(){return re.apply(this,arguments)}function re(){return(re=Object(J.a)(G.a.mark((function e(){return G.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return $(!0),e.next=3,Qe().then((function(e){void 0!==e&&(x(e),h([{key:"",value:""}].concat(Object(K.a)(e.map((function(e){var t;return{key:e.id.toString(),value:null!==(t=e.fullName)&&void 0!==t?t:""}}))))))})).catch((function(e){_({message:e.message})})).finally((function(){return $(!1)}));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ce(e){var t=e.elementName,n=e.value;if("role"===t){var r,c=null===(r=S.filter((function(e){return e.id===+n})))||void 0===r?void 0:r[0];z((function(e){return[].concat(Object(K.a)(e),[{id:0,roleId:c.id,role:c,userId:k.id}])})),A((function(e){return e.filter((function(e){return e.key!==n}))}))}if("personnel"!==t)N((function(e){return void 0===e?Object(T.a)({},t,n):Object(V.a)(Object(V.a)({},e),{},Object(T.a)({},t,n))}));else{var a,s=null===(a=m.filter((function(e){return e.id===+n})))||void 0===a?void 0:a[0];N((function(e){return Object(V.a)(Object(V.a)({},e),{},{personnel:s,personnelId:s.id})}))}}function ae(){return se.apply(this,arguments)}function se(){return(se=Object(J.a)(G.a.mark((function e(){return G.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return $(!0),e.next=3,ct().then((function(e){void 0!==e&&(E(e),A([{key:"",value:""}].concat(Object(K.a)(e.filter((function(e){var t,n,r;return!(null!==(t=k.userRoles)&&void 0!==t&&null!==(n=t.filter((function(t){return t.roleId===e.id})))&&void 0!==n&&null!==(r=n[0])&&void 0!==r&&r.id)})).map((function(e){return{key:e.id.toString(),value:e.description}}))))))})).catch((function(e){_({message:e.message})})).finally((function(){$(!1)}));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(r.useEffect)((function(){!function(){ee.apply(this,arguments)}()}),[]),Object(l.jsxs)(d,{onClose:function(){return j(!1)},title:(null!==(t=null===k||void 0===k?void 0:k.id)&&void 0!==t?t:0)>0?"Update Users Information":"Add New User",children:[Object(l.jsxs)("div",{className:"user-management-modal-body modal-content-body",children:[Object(l.jsxs)("div",{children:[Object(l.jsx)(jt,{title:"Personnel",name:"personnel",value:null===k||void 0===k||null===(n=k.personnel)||void 0===n?void 0:n.fullName,onChange:ce,itemsList:p}),Object(l.jsx)(Ve,{title:"Username",name:"username",value:null===k||void 0===k?void 0:k.username,onChange:ce})]}),Object(l.jsxs)("div",{children:[Object(l.jsx)(dt,{title:"Is Admin",name:"admin",isCheck:null!==(c=null===k||void 0===k?void 0:k.admin)&&void 0!==c&&c,onChange:ce}),Object(l.jsx)(dt,{title:"Is Active",name:"active",isCheck:null!==(a=null===k||void 0===k?void 0:k.active)&&void 0!==a&&a,onChange:ce})]}),Object(l.jsx)("div",{children:Object(l.jsx)(jt,{title:"Role",name:"role",onChange:ce,itemsList:U})}),Object(l.jsx)("div",{className:"table-container",children:Object(l.jsxs)("table",{className:"item-table",children:[Object(l.jsx)("thead",{children:Object(l.jsx)("tr",{children:Object(l.jsx)("th",{children:"User Roles"})})}),Object(l.jsx)("tbody",{children:null===M||void 0===M?void 0:M.map((function(e){var t;return Object(l.jsxs)("tr",{className:e.deleted?"deleted":"",children:[Object(l.jsx)("td",{children:null===(t=e.role)||void 0===t?void 0:t.description}),Object(l.jsxs)("td",{className:"table-actions",children:[e.deleted&&Object(l.jsx)(u.a,{icon:o.l,className:"action-icon table-icon-button",onClick:function(){!function(e){z((function(t){return t.map((function(t){return t.roleId===e.roleId&&(t.deleted=!1),t}))}))}(e)},title:"Undo"}),!e.deleted&&Object(l.jsx)(u.a,{icon:o.k,className:"action-icon table-icon-button",onClick:function(){!function(e){var t,n,r,c;z((function(t){return 0===e.id?t.filter((function(t){return t.roleId!==e.roleId})):t.map((function(t){return t.roleId===e.roleId&&(t.deleted=!0),t}))})),0===e.id&&A([].concat(Object(K.a)(U),[{key:null!==(t=null===(n=e.roleId)||void 0===n?void 0:n.toString())&&void 0!==t?t:"",value:null!==(r=null===(c=e.role)||void 0===c?void 0:c.description)&&void 0!==r?r:""}]))}(e)},title:"Delete"}),Object(l.jsx)(u.a,{icon:o.f,className:"action-icon table-icon-button",onClick:function(){!function(e){Z(e.role),H(!0)}(e)},title:"View"})]})]},e.roleId)}))})]})})]}),Object(l.jsx)("div",{className:"modal-footer",children:Object(l.jsx)("button",{onClick:function(){return te.apply(this,arguments)},className:"btn-modal btn-primary",children:"SAVE"})}),Object(l.jsx)("div",{children:q&&Object(l.jsx)(xt,{onClose:function(){H(!1)},selectedRole:X,viewOnly:!0})})]})}function yt(){var e=Object(r.useState)(),t=Object(i.a)(e,2),n=t[0],c=t[1],a=Object(r.useState)([]),s=Object(i.a)(a,2),o=s[0],u=s[1],d=Object(r.useState)(1),j=Object(i.a)(d,2),b=j[0],f=j[1],p=Object(r.useState)(1),h=Object(i.a)(p,2),v=h[0],O=h[1],m=L(),x=F(),w=Object(r.useState)(!1),y=Object(i.a)(w,2),k=y[0],N=y[1],g=Object(r.useState)(),C=Object(i.a)(g,2),S=C[0],E=C[1];function P(e){switch(e.type){case"Activate":t=e.id,n=e.active,x({message:"Active this user?",action:"YESNO",onOk:function(){var e=Object(J.a)(G.a.mark((function e(){return G.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return m(!0),e.next=3,Ue(t).then((function(e){u((function(e){return e.map((function(e){return e.id===t&&null!==n&&(e.active=!n),e}))})),x({message:n?"Deactivated":"Activated"})})).catch((function(e){x({message:e.message})})).finally((function(){return m(!1)}));case 3:case"end":return e.stop()}}),e)})));function r(){return e.apply(this,arguments)}return r}()});break;case"ResetPassword":!function(e){x({message:"Reset Password?",action:"YESNO",onOk:function(){var t=Object(J.a)(G.a.mark((function t(){return G.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return m(!0),t.next=3,Re(e).then((function(){x({message:"Password reset to default password"})})).catch((function(e){x({message:e.message})})).finally((function(){return m(!1)}));case 3:case"end":return t.stop()}}),t)})));function n(){return t.apply(this,arguments)}return n}()})}(e.id);break;case"Edit":N(!0),E(e.user);break;case"Delete":x({message:"Are you sure you want to delete this?",action:"YESNO",onOk:function(){!function(e){I.apply(this,arguments)}(e.id)}});break;default:x({message:"Invalid Action"})}var t,n}function I(){return(I=Object(J.a)(G.a.mark((function e(t){return G.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return m(!0),e.next=3,Fe(t).then((function(){x({message:"User Deleted",onOk:function(){U(n,v)}})})).catch((function(e){x({message:e.message})})).finally((function(){return m(!1)}));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function U(e,t){m(!0),function(e,t){return Ie.apply(this,arguments)}(e,t).then((function(e){void 0!==e&&(u(e.results),f(e.pageCount),O(t))})).catch((function(e){x({message:e.message})})).finally((function(){return m(!1)}))}return Object(r.useEffect)((function(){U(n,v)}),[]),Object(l.jsxs)(l.Fragment,{children:[Object(l.jsx)("section",{children:Object(l.jsx)("div",{className:"header",children:Object(l.jsx)("div",{className:"header-text",children:"Users"})})}),Object(l.jsx)("section",{children:Object(l.jsx)(Ge,{search:function(e){c(e),U(e,1)}})}),Object(l.jsx)("section",{children:Object(l.jsx)(qe,{pages:b,currentPageNumber:v,goInPage:function(e){U(n,e)}})}),Object(l.jsx)("section",{children:Object(l.jsxs)("table",{className:"users-content item-table",children:[Object(l.jsxs)("thead",{children:[Object(l.jsxs)("tr",{children:[Object(l.jsx)("th",{children:"Name"}),Object(l.jsx)("th",{children:"Username"}),Object(l.jsx)("th",{children:"Role"}),Object(l.jsx)("th",{children:"Status"})]}),Object(l.jsx)("tr",{children:Object(l.jsx)("th",{colSpan:6,children:Object(l.jsx)("button",{className:"btn",onClick:function(){E(void 0),N(!0)},children:"Add New User"})})})]}),Object(l.jsx)("tbody",{children:o.map((function(e){return Object(l.jsx)(He,{user:e,action:P},e.id)}))})]})}),Object(l.jsx)(l.Fragment,{children:k&&Object(l.jsx)(wt,{onClose:function(e){N(!1),e&&U(n,v)},usersInfo:S})})]})}var kt="/",Nt="/users",gt="/roles",Ct="/personnel";function St(){return Object(l.jsx)("div",{children:"TEMPLATE SYSTEM"})}function Et(e){var t,n=e.onClose,c=R(),a=M(),s=Object(r.useState)((function(){var e;return{username:null!==(e=null===c||void 0===c?void 0:c.username)&&void 0!==e?e:"",personnel:null===c||void 0===c?void 0:c.personnel,password:"",confirmNewPassword:"",newPassword:""}})),o=Object(i.a)(s,2),u=o[0],j=o[1],b=L(),f=F();function p(){return(p=Object(J.a)(G.a.mark((function e(){var t,r,s;return G.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(""===(null!==(t=u.password)&&void 0!==t?t:"")){e.next=5;break}if(""===(null!==(r=u.newPassword)&&void 0!==r?r:"")||""===(null!==(s=u.confirmNewPassword)&&void 0!==s?s:"")){e.next=5;break}if(u.newPassword===u.confirmNewPassword){e.next=5;break}return f({message:"Password not match"}),e.abrupt("return");case 5:return b(!0),e.next=8,Be(u).then((function(){f({message:"Profile Updated",onOk:function(){k(Object(V.a)(Object(V.a)({},c),{},{username:u.username})),a(Object(V.a)(Object(V.a)({},c),{},{username:u.username})),n()}})})).catch((function(e){f({message:e.message})})).finally((function(){return b(!1)}));case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function h(e){var t=e.elementName,n=e.value;j((function(e){return Object(V.a)(Object(V.a)({},e),{},Object(T.a)({},t,n))}))}return Object(l.jsxs)(d,{className:"profile-modal",onClose:n,title:"Users Profile",children:[Object(l.jsx)("div",{className:"modal-content-body",children:Object(l.jsxs)("div",{children:[Object(l.jsx)(Ve,{title:"Name",readonly:!0,value:null===u||void 0===u||null===(t=u.personnel)||void 0===t?void 0:t.fullName}),Object(l.jsx)(Ve,{title:"Username",name:"username",value:null===u||void 0===u?void 0:u.username,onChange:h}),Object(l.jsx)(Ve,{title:"Old Password",name:"password",value:null===u||void 0===u?void 0:u.password,type:"password",onChange:h}),Object(l.jsx)(Ve,{title:"New Password",name:"newPassword",type:"password",value:null===u||void 0===u?void 0:u.newPassword,onChange:h}),Object(l.jsx)(Ve,{title:"Confirm New Password",name:"confirmNewPassword",type:"password",value:null===u||void 0===u?void 0:u.confirmNewPassword,onChange:h})]})}),Object(l.jsx)("div",{className:"modal-footer",children:Object(l.jsx)("button",{onClick:function(){return p.apply(this,arguments)},className:"btn-modal btn-primary",children:"SAVE"})})]})}function Pt(e){var t=e.personnel,n=Object(r.useContext)(Rt);return Object(l.jsxs)("tr",{children:[Object(l.jsx)("td",{children:t.firstName}),Object(l.jsx)("td",{children:t.middleName}),Object(l.jsx)("td",{children:t.lastName}),Object(l.jsxs)("td",{className:"table-actions",children:[Object(l.jsx)("button",{className:"btn",onClick:function(){return n({action:"Edit",payload:t})},children:"Edit"}),Object(l.jsx)("button",{className:"btn",onClick:function(){return n({action:"Delete",payload:t.id})},children:"Delete"})]})]})}function It(){var e=Object(r.useContext)(Rt),t=Object(r.useContext)(At);return Object(l.jsxs)("table",{className:"item-table",children:[Object(l.jsxs)("thead",{children:[Object(l.jsxs)("tr",{children:[Object(l.jsx)("th",{children:"First Name"}),Object(l.jsx)("th",{children:"Middle Name"}),Object(l.jsx)("th",{children:"Last Name"})]}),Object(l.jsx)("tr",{children:Object(l.jsx)("th",{colSpan:10,children:Object(l.jsx)("button",{className:"btn",onClick:function(){e({action:"Add"})},children:"Add New Personnel"})})})]}),Object(l.jsx)("tbody",{children:t.map((function(e){return Object(l.jsx)(Pt,{personnel:e},e.id)}))})]})}function Ut(e){var t=e.selectedPersonnel,n=e.onClose,c=Object(r.useState)((function(){return null!==t&&void 0!==t?t:{id:0,firstName:"",middleName:"",lastName:""}})),a=Object(i.a)(c,2),s=a[0],o=a[1],u=L(),j=F();function b(){return(b=Object(J.a)(G.a.mark((function e(){return G.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(u(!0),0!==s.id){e.next=6;break}return e.next=4,$e(s).then((function(){j({message:"Personnel Added",onOk:function(){n(!0)}})})).catch((function(e){j({message:e.message})})).finally((function(){return u(!1)}));case 4:e.next=8;break;case 6:return e.next=8,et(s).then((function(){j({message:"Personnel Updated",onOk:function(){n(!0)}})})).catch((function(e){j({message:e.message})})).finally((function(){return u(!1)}));case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function f(e){var t=e.value,n=e.elementName;o((function(e){return Object(V.a)(Object(V.a)({},e),{},Object(T.a)({},n,t))}))}return Object(l.jsxs)(d,{onClose:function(){n(!1)},title:null!==t&&void 0!==t&&t.id?"Update Personnel":"Add New Personnel",children:[Object(l.jsxs)("div",{className:"concern-management-modal-body modal-content-body concern-management",children:[Object(l.jsx)(Ve,{title:"First Name",name:"firstName",value:s.firstName,onChange:f}),Object(l.jsx)(Ve,{title:"Middle Name",name:"middleName",value:s.middleName,onChange:f}),Object(l.jsx)(Ve,{title:"Last Name",name:"lastName",value:s.lastName,onChange:f})]}),Object(l.jsx)("div",{className:"modal-footer",children:Object(l.jsx)("button",{onClick:function(){return b.apply(this,arguments)},className:"btn-modal btn-primary",children:"SAVE"})})]})}var At=Object(r.createContext)([]),Rt=Object(r.createContext)((function(){}));function Dt(){var e=Object(r.useState)(),t=Object(i.a)(e,2),n=t[0],c=t[1],a=Object(r.useState)([]),s=Object(i.a)(a,2),o=s[0],u=s[1],d=Object(r.useState)(1),j=Object(i.a)(d,2),b=j[0],f=j[1],p=Object(r.useState)(1),h=Object(i.a)(p,2),v=h[0],O=h[1],m=L(),x=F(),w=Object(r.useState)(!1),y=Object(i.a)(w,2),k=y[0],N=y[1],g=Object(r.useState)(),C=Object(i.a)(g,2),S=C[0],E=C[1];function P(){return(P=Object(J.a)(G.a.mark((function e(t){return G.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return m(!0),e.next=3,nt(t).then((function(){x({message:"Deleted."})})).catch((function(e){x({message:e.message})})).finally((function(){return m(!1)}));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function I(e){return U.apply(this,arguments)}function U(){return(U=Object(J.a)(G.a.mark((function e(t){var r,c;return G.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.searchKey,c=t.page,m(!0),e.next=4,Xe(null!==r&&void 0!==r?r:n,null!==c&&void 0!==c?c:v).then((function(e){void 0!==e&&(u(e.results),f(e.pageCount),void 0!==c&&O(c))})).catch((function(e){x({message:e.message})})).finally((function(){return m(!1)}));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(r.useEffect)((function(){I({})}),[]),Object(l.jsxs)(l.Fragment,{children:[Object(l.jsx)("section",{children:Object(l.jsx)("div",{className:"header",children:Object(l.jsx)("div",{className:"header-text",children:"Personnels"})})}),Object(l.jsx)("section",{children:Object(l.jsx)(Ge,{search:function(e){c(e),I({searchKey:e,page:1})}})}),Object(l.jsx)("section",{children:Object(l.jsx)(qe,{pages:b,currentPageNumber:v,goInPage:function(e){I({page:e})}})}),Object(l.jsx)("section",{children:Object(l.jsx)(At.Provider,{value:o,children:Object(l.jsx)(Rt.Provider,{value:function(e){switch(e.action){case"Add":N(!0),E(void 0);break;case"Edit":N(!0),E(e.payload);break;case"Delete":x({message:"Do you want to delete this personnel?",action:"YESNO",onOk:function(){!function(e){P.apply(this,arguments)}(e.payload)}})}},children:Object(l.jsx)(It,{})})})}),Object(l.jsx)(l.Fragment,{children:k&&Object(l.jsx)(Ut,{onClose:function(e){N(!1),e&&I({})},selectedPersonnel:S})})]})}function Ft(e){var t=e.role,n=Object(r.useContext)(zt);return Object(l.jsxs)("tr",{children:[Object(l.jsx)("td",{children:t.description}),Object(l.jsxs)("td",{className:"table-actions",children:[Object(l.jsx)("button",{className:"btn",onClick:function(){return n({action:"View",payload:t})},children:"View"}),Object(l.jsx)("button",{className:"btn",onClick:function(){return n({action:"Edit",payload:t})},children:"Edit"}),Object(l.jsx)("button",{className:"btn",onClick:function(){return n({action:"Delete",payload:t.id})},children:"Delete"})]})]})}function Lt(){var e=Object(r.useContext)(zt),t=Object(r.useContext)(Mt);return Object(l.jsxs)("table",{className:"item-table",children:[Object(l.jsxs)("thead",{children:[Object(l.jsx)("tr",{children:Object(l.jsx)("th",{children:"Description"})}),Object(l.jsx)("tr",{children:Object(l.jsx)("th",{colSpan:10,children:Object(l.jsx)("button",{className:"btn",onClick:function(){e({action:"Add"})},children:"Add New Role"})})})]}),Object(l.jsx)("tbody",{children:t.map((function(e){return Object(l.jsx)(Ft,{role:e},e.id)}))})]})}var Mt=Object(r.createContext)([]),zt=Object(r.createContext)((function(){}));function Kt(){var e=Object(r.useState)(),t=Object(i.a)(e,2),n=t[0],c=t[1],a=Object(r.useState)([]),s=Object(i.a)(a,2),o=s[0],u=s[1],d=Object(r.useState)(1),j=Object(i.a)(d,2),b=j[0],f=j[1],p=Object(r.useState)(1),h=Object(i.a)(p,2),v=h[0],O=h[1],m=L(),x=F(),w=Object(r.useState)(!1),y=Object(i.a)(w,2),k=y[0],N=y[1],g=Object(r.useState)(),C=Object(i.a)(g,2),S=C[0],E=C[1],P=Object(r.useState)(!1),I=Object(i.a)(P,2),U=I[0],A=I[1];function R(e){var t=e.searchKey,r=e.page;m(!0),function(e,t){return st.apply(this,arguments)}(null!==t&&void 0!==t?t:n,null!==r&&void 0!==r?r:v).then((function(e){void 0!==e&&(u(e.results),f(e.pageCount),void 0!==r&&O(r))})).catch((function(e){x({message:e.message})})).finally((function(){return m(!1)}))}return Object(r.useEffect)((function(){R({})}),[]),Object(l.jsxs)(l.Fragment,{children:[Object(l.jsx)("section",{children:Object(l.jsx)("div",{className:"header",children:Object(l.jsx)("div",{className:"header-text",children:"Roles"})})}),Object(l.jsx)("section",{children:Object(l.jsx)(Ge,{search:function(e){c(e),R({searchKey:e,page:1})}})}),Object(l.jsx)("section",{children:Object(l.jsx)(qe,{pages:b,currentPageNumber:v,goInPage:function(e){R({page:e})}})}),Object(l.jsx)("section",{children:Object(l.jsx)(Mt.Provider,{value:o,children:Object(l.jsx)(zt.Provider,{value:function(e){switch(e.action){case"View":N(!0),E(e.payload),A(!0);break;case"Add":N(!0),E(void 0),A(!1);break;case"Edit":N(!0),E(e.payload),A(!1)}},children:Object(l.jsx)(Lt,{})})})}),Object(l.jsx)(l.Fragment,{children:k&&Object(l.jsx)(xt,{onClose:function(e){N(!1),e&&R({})},selectedRole:S,viewOnly:U})})]})}function Yt(){var e,t,n,c,a,s,d,j,b,f,p=Object(r.useState)(!1),h=Object(i.a)(p,2),v=h[0],O=h[1],m=Object(r.useContext)(N),x=R(),w=D(),y=F(),k=Object(r.useMemo)((function(){var e,t,n,r;return Object(K.a)(null!==x&&void 0!==x&&x.admin?[{head:"Managements",navs:[{route:Ct,name:"Personnel"},{route:Nt,name:"Users"},{route:gt,name:"Roles"}]}]:[{head:"Transactions",navs:Object(K.a)(null!==(e=null===x||void 0===x||null===(t=x.distinctModules)||void 0===t?void 0:t.filter((function(e){return"Transaction"===e.header})).map((function(e){return{route:e.route,name:e.description}})))&&void 0!==e?e:[])},{head:"Managements",navs:Object(K.a)(null!==(n=null===x||void 0===x||null===(r=x.distinctModules)||void 0===r?void 0:r.filter((function(e){return"Management"===e.header})).map((function(e){return{route:e.route,name:e.description}})))&&void 0!==n?n:[])}])}),[null===x||void 0===x?void 0:x.distinctModules,null===x||void 0===x?void 0:x.admin]);return console.log(k),Object(l.jsx)(l.Fragment,{children:m?Object(l.jsxs)(Y.a,{children:[Object(l.jsx)("header",{children:Object(l.jsxs)("nav",{children:[Object(l.jsxs)("div",{className:"menu-container",children:[Object(l.jsxs)("div",{className:"nav-menu-container",children:[Object(l.jsx)("button",{className:"nav-menu",children:Object(l.jsx)(u.a,{icon:o.e})}),Object(l.jsx)("div",{className:"menus",children:k.filter((function(e){return e.navs.length>0})).map((function(e){return Object(l.jsxs)("div",{className:"menu-items",children:[Object(l.jsx)("div",{className:"head",children:e.head}),Object(l.jsx)("div",{className:"navs",children:e.navs.map((function(e){var t;return Object(l.jsx)("h1",{children:Object(l.jsx)(Y.b,{to:null!==(t=e.route)&&void 0!==t?t:"",exact:!0,className:"nav-menu",children:e.name})},e.route)}))})]},e.head)}))})]}),Object(l.jsx)(Y.b,{to:kt,exact:!0,className:"nav-icon",children:Object(l.jsx)(St,{})})]}),Object(l.jsxs)("div",{className:"menu-container",children:[Object(l.jsx)("label",{className:"user-name nav-menu",onClick:function(){return O(!0)},children:"".concat(null===x||void 0===x||null===(e=x.personnel)||void 0===e?void 0:e.fullName)}),Object(l.jsx)("button",{onClick:function(){y({message:"Continue to logout?",action:"YESNO",onOk:function(){w(!1),O(!1)}})},className:"nav-menu",children:Object(l.jsx)(u.a,{icon:o.h})})]})]})}),Object(l.jsxs)(B.c,{children:[((null===x||void 0===x||null===(t=x.distinctModules)||void 0===t||null===(n=t.filter((function(e){return e.route===Nt})))||void 0===n||null===(c=n[0])||void 0===c?void 0:c.id)||(null===x||void 0===x?void 0:x.admin))&&Object(l.jsx)(B.a,{path:Nt,exact:!0,component:yt}),((null===x||void 0===x||null===(a=x.distinctModules)||void 0===a||null===(s=a.filter((function(e){return e.route===gt})))||void 0===s||null===(d=s[0])||void 0===d?void 0:d.id)||(null===x||void 0===x?void 0:x.admin))&&Object(l.jsx)(B.a,{path:gt,exact:!0,component:Kt}),((null===x||void 0===x||null===(j=x.distinctModules)||void 0===j||null===(b=j.filter((function(e){return e.route===Ct})))||void 0===b||null===(f=b[0])||void 0===f?void 0:f.id)||(null===x||void 0===x?void 0:x.admin))&&Object(l.jsx)(B.a,{path:Ct,exact:!0,component:Dt})]}),Object(l.jsx)("div",{children:v&&Object(l.jsx)(Et,{onClose:function(){return O(!1)}})})]}):Object(l.jsx)(Je,{})})}n(107);var Bt=function(){return Object(l.jsx)(z,{children:Object(l.jsx)(Yt,{})})};s.a.render(Object(l.jsx)(c.a.StrictMode,{children:Object(l.jsx)(Bt,{})}),document.getElementById("root"))},52:function(e,t,n){},57:function(e,t){}},[[108,1,2]]]);
//# sourceMappingURL=main.16957d90.chunk.js.map